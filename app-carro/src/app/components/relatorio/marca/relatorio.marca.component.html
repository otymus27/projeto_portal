<div class="container mt-4">
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Consulta e Relatórios de Marcas</h5>

      <form class="form-inline mt-3">
        <div class="form-group mr-2">
          <label for="nomeFiltro" class="mr-2">Nome:</label>
          <input
            type="text"
            class="form-control"
            id="nomeFiltro"
            [(ngModel)]="nomeFiltro"
            name="nomeFiltro"
            placeholder="Digite o nome da marca"
            (keyup.enter)="buscarPersonalizada()"
          />
        </div>

        <button
          type="button"
          class="btn btn-primary ml-2"
          (click)="buscarPersonalizada()"
          (keyup.enter)="buscarPersonalizada()"
        >
          <i class="fa fa-search"></i> Buscar Personalizada
        </button>

        <button
          type="button"
          class="btn btn-secondary ml-2"
          (click)="buscarTodosRegistros()"
        >
          <i class="fa fa-list"></i> Listar Todos
        </button>
      </form>

      <hr />

      <table class="table table-striped mt-3">
        <thead>
          <tr>
            <th (click)="alternarOrdenacao('id')">ID</th>
            <th (click)="alternarOrdenacao('nome')">Nome</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let marca of marcas">
            <td>{{ marca.id }}</td>
            <td>{{ marca.nome }}</td>
          </tr>
          <tr *ngIf="marcas.length === 0">
            <td colspan="2" class="text-center">Nenhum registro encontrado.</td>
          </tr>
        </tbody>
      </table>

      <!-- Paginação estilizada com contador na mesma linha -->
      <div
        class="d-flex justify-content-between align-items-center mt-4 flex-wrap bg-light text-white p-3"
      >
        <div class="text-muted me-3">
          <small>
            Exibindo página <strong>{{ page + 1 }}</strong> de
            <strong>{{ totalPages }}</strong> — Total de registros:
            <strong>{{ totalElements }}</strong>
          </small>
        </div>

        <!-- Navegação -->
        <nav>
          <ul class="pagination mb-0">
            <!-- Botão Anterior -->
            <li class="page-item" [class.disabled]="page === 0">
              <button
                class="page-link"
                (click)="paginaAnterior()"
                [disabled]="page === 0"
              >
                ‹ Anterior
              </button>
            </li>

            <!-- Páginas -->
            <li
              *ngFor="let p of [].constructor(totalPages); let i = index"
              class="page-item"
              [class.active]="i === page"
            >
              <button class="page-link" (click)="irParaPagina(i)">
                {{ i + 1 }}
              </button>
            </li>

            <!-- Botão Próximo -->
            <li class="page-item" [class.disabled]="page + 1 >= totalPages">
              <button
                class="page-link"
                (click)="proximaPagina()"
                [disabled]="page + 1 >= totalPages"
              >
                Próxima ›
              </button>
            </li>
          </ul>
        </nav>
      </div>

      <hr />

      <h6 class="mt-4">Gerar Relatórios</h6>
      <div class="mt-2">
        <button
          class="btn btn-danger mr-2"
          (click)="gerarRelatorioMarca('pdf')"
        >
          <i class="fa fa-file-pdf"></i> Gerar PDF
        </button>
        <button
          class="btn btn-success mr-2"
          (click)="gerarRelatorioMarca('xls')"
        >
          <i class="fa fa-file-excel"></i> Gerar XLS
        </button>
        <button class="btn btn-info" (click)="gerarRelatorioMarca('csv')">
          <i class="fa fa-file-csv"></i> Gerar CSV
        </button>
      </div>
    </div>
  </div>
</div>
